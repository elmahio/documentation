<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="manifest" href="../site.webmanifest">
    <meta content="yes" name="mobile-web-app-capable">
    <meta name="apple-mobile-web-app-title" content="elmah.io">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="../icons/mstile-144x144.png">
    <meta name="theme-color" content="#0da58e">
    <meta name="description" content="Set up cloud logging on NLog to start monitoring errors with elmah.io. Learn about our custom target that logs structured properties and more.">
    <meta name="author" content="Thomas Ardal">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@elmah_io">
    <meta name="twitter:creator" content="@elmah_io">
    <meta name="twitter:title" content="Logging to elmah.io from NLog | elmah.io">
    <meta name="twitter:description" content="Set up cloud logging on NLog to start monitoring errors with elmah.io. Learn about our custom target that logs structured properties and more.">
    <meta name="twitter:image" content="https://docs.elmah.io/assets/img/open-graph-elmahio.png">
    <meta property="og:site_name" content="elmah.io Documentation" />
    <meta property="og:title" content="Logging to elmah.io from NLog">
    <meta property="og:description" content="Set up cloud logging on NLog to start monitoring errors with elmah.io. Learn about our custom target that logs structured properties and more.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://docs.elmah.io/logging-to-elmah-io-from-nlog/">
    <meta property="og:image" content="https://docs.elmah.io/assets/img/open-graph-elmahio.png">
    <meta property="article:published_time" content="2026-01-29">
    <meta property="article:modified_time" content="2026-01-29">
    <meta property="article:publisher" content="https://www.facebook.com/elmahdotio/" />
    <meta property="article:author" content="elmah.io" />
    <meta property="fb:app_id" content="218008838347208" />
    <title>Logging to elmah.io from NLog</title>
    <link rel="canonical" href="https://docs.elmah.io/logging-to-elmah-io-from-nlog/">
    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="preload" href="../assets/fonts/font-awesome/webfonts/fa-brands-400.woff2" as="font" crossorigin />
    <link rel="preload" href="../assets/fonts/font-awesome/webfonts/fa-regular-400.woff2" as="font" crossorigin />

    <!-- Bootstrap CSS -->
    
    <link rel="stylesheet" href="../assets/css/style.min.css?version=619">
    

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "publisher": {
        "@type": "Organization",
        "name": "elmah.io Documentation",
        "url": "https://docs.elmah.io/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://docs.elmah.io/assets/img/elmahio-publication-logo.png",
          "width": 600,
          "height": 60
        }
      },
      "headline": "Logging from NLog",
      "url": "https://docs.elmah.io/logging-to-elmah-io-from-nlog/",
      "datePublished": "2026-01-29",
      "dateModified": "2026-01-29",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://docs.elmah.io/"
      }
    }
    </script>

  </head>
  <body>
    <script src="../assets/js/theme-selector.js"></script>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark sticky-top">
  <div class="container">
    <a class="navbar-brand" href="https://elmah.io/">
      <img src="../assets/img/logo.png" width="30" height="22" alt="elmah.io">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/features/">Features</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/pricing/">Pricing</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/tour/">Tour</a></li>
        <li class="nav-item"><a class="nav-link" href="https://elmah.io/about/">About</a></li>
        <li class="nav-item"><a class="nav-link" href="https://docs.elmah.io/">Docs</a></li>
        <li class="nav-item"><a class="nav-link" href="https://blog.elmah.io/">Blog</a></li>
      </ul>
      <ul class="navbar-nav navbar-nav-btn justify-content-center">
        <div class="mode-switch mb-2 mb-md-0 d-none">
          <button id="toggle-theme" class="btn btn-outline-light d-block d-md-none d-lg-block">
            <i class="fas fa-moon d-none" id="dark"></i>
            <i class="fas fa-sun d-none" id="light"></i>
          </button>
        </div>
        <li class="nav-item mx-md-2 mb-2 mb-md-0"><a class="btn btn-outline-light" href="https://app.elmah.io/login/">Login</a></li>
        <li class="nav-item"><a class="btn btn-signup-trial" href="https://app.elmah.io/signup/">Free Trial</a></li>
      </ul>
    </div>
  </div>
</nav>

    <div class="container mb-5">
      <div class="row-wrapper">
        <aside class="sidebar">
          <div class="sidebar-body">
            <div class="input-group mb-3">
              <div class="input-group-prepend"><span class="input-group-text"><label class="mb-0" for="search"><i class="far fa-search"></i></label></span></div>
              <input type="text" id="search" class="form-control" placeholder="Search ..." autocomplete="off" />
            </div>
            <div class="bugster-banner d-block d-md-none">
              <a role="button" data-bs-toggle="modal" data-bs-target="#bugsterModal">
                <div class="content">
                  <p class="mb-1 lead">Have a question ?</p>
                  <p class="mb-0">Ask anything and Bugster will be ready to answer and help you.</p>
                </div>
                <div class="bugster-logo">
                  <img class="img-fluid" src="../assets/img/bugster.png" width="383" height="374" alt="Bugster">
                </div>
              </a>
            </div>
            <div id="searchList" class="mt-3"></div>
            <hr>
            <ul class="main-nav">
              
              <li >
                <a class="li_parent" href="javascript:;">Getting Started</a>
                <ul>
                  
                  <li ><a href="/">Quick start</a></li>
                  
                  <li ><a href="/authentication/">Authentication</a></li>
                  
                  <li ><a href="/integrations-high-level-overview/">Integrations high level overview</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-elmah/">Logging from WebForms</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-aspnet-mvc/">Logging from ASP.NET MVC</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-web-api/">Logging from Web API</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-web-pages/">Logging from Web Pages</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-a-running-website-on-iis/">Logging from a running website on IIS</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-a-running-website-on-azure/">Logging from a running website on Azure</a></li>
                  
                  <li ><a href="/logging-custom-data/">Logging custom data</a></li>
                  
                  <li ><a href="/logging-errors-programmatically/">Logging errors programmatically</a></li>
                  
                  <li ><a href="/logging-to-multiple-elmah-logs/">Logging to multiple logs</a></li>
                  
                  <li ><a href="/remove-sensitive-form-data/">Remove sensitive form data</a></li>
                  
                  <li ><a href="/setting-application-name/">Setting application name</a></li>
                  
                  <li ><a href="/configure-elmah-io-manually/">Configure elmah.io manually</a></li>
                  
                  <li ><a href="/configure-elmah-io-from-code/">Configure elmah.io from code</a></li>
                  
                  <li ><a href="/logging-through-a-http-proxy/">Logging through a HTTP proxy</a></li>
                  
                  <li ><a href="/use-multiple-logs-for-different-environments/">Use multiple logs for different environments</a></li>
                  
                  <li ><a href="/specify-api-key-and-log-id-through-appsettings/">Specify API key and log ID through appSettings</a></li>
                  
                  <li ><a href="/elmah-and-custom-errors/">ELMAH and custom errors</a></li>
                  
                  <li ><a href="/logging-from-a-custom-http-module/">Logging from a custom HTTP module</a></li>
                  
                  <li ><a href="/asp-net-troubleshooting/">ASP.NET troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">ASP.NET Core</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-aspnet-core/">Logging from ASP.NET Core</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-blazor/">Logging from Blazor</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-signalr/">Logging from SignalR</a></li>
                  
                  <li ><a href="/using-different-logs-per-environment-in-aspnet-core/">Using different logs per environment in ASP.NET Core</a></li>
                  
                  <li ><a href="/logging-breadcrumbs-from-asp-net-core/">Logging breadcrumbs from ASP.NET Core</a></li>
                  
                  <li ><a href="/roslyn-analyzers-for-elmah-io-and-aspnet-core/">Roslyn analyzers for elmah.io and ASP.NET Core</a></li>
                  
                  <li ><a href="/asp-net-core-troubleshooting/">ASP.NET Core troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown active">
                <a class="li_parent" href="javascript:;">Logging Frameworks</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-serilog/">Logging from Serilog</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-log4net/">Logging from log4net</a></li>
                  
                  <li class="active"><a href="/logging-to-elmah-io-from-nlog/">Logging from NLog</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-microsoft-extensions-logging/">Logging from Microsoft.Extensions.Logging</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-logary/">Logging from Logary</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-jsnlog/">Logging from JSNLog</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">JavaScript</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-javascript/">Logging from JavaScript</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-angular/">Logging from Angular</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-react/">Logging from React</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-vue/">Logging from Vue</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-sveltekit/">Logging from SvelteKit</a></li>
                  
                  <li ><a href="/sourcemaps/">Source maps</a></li>
                  
                  <li ><a href="/javascript-troubleshooting/">JavaScript troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">CMS/Blogs</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-umbraco/">Logging from Umbraco</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-sitefinity/">Logging from Sitefinity</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-blogengine-net/">Logging from BlogEngine.NET</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-orchard/">Logging from Orchard</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-piranha-cms/">Logging from Piranha CMS</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Mobile</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-xamarin/">Logging from Xamarin</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-uno/">Logging from Uno</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-maui/">Logging from MAUI</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Logging from something else</a>
                <ul>
                  
                  <li ><a href="/logging-to-elmah-io-from-wcf/">Logging from WCF</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-corewcf/">Logging from CoreWCF</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-azure-functions/">Logging from Azure Functions</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-isolated-azure-functions/">Logging from Isolated Azure Functions</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-powershell/">Logging from PowerShell</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-wpf/">Logging from WPF</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-winui/">Logging from WinUI</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-winforms/">Logging from Windows Forms</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-entity-framework-core/">Logging from Entity Framework Core</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-console-application/">Logging from C# and console applications</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-opentelemetry/">Logging from OpenTelemetry</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-httpclient/">Logging from HttpClient</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-aws-beanstalk/">Logging from AWS Beanstalk</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-aws-lambdas/">Logging from AWS Lambdas</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-servicestack/">Logging from ServiceStack</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-devexpress/">Logging from DevExpress (eXpressApp Framework)</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-google-cloud-functions/">Logging from Google Cloud Functions</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-system-diagnostics/">Logging from System.Diagnostics</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-azure-webjobs/">Logging from Azure WebJobs</a></li>
                  
                  <li ><a href="/logging-to-elmah-io-from-nancy/">Logging from Nancy</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Apps and Integrations</a>
                <ul>
                  
                  <li ><a href="/elmah-io-apps-slack/">Slack</a></li>
                  
                  <li ><a href="/elmah-io-apps-teams/">Microsoft Teams</a></li>
                  
                  <li ><a href="/elmah-io-apps-twilio/">Twilio</a></li>
                  
                  <li ><a href="/elmah-io-apps-jira/">Jira</a></li>
                  
                  <li ><a href="/elmah-io-apps-azure-boards/">Azure Boards</a></li>
                  
                  <li ><a href="/elmah-io-apps-bitbucket/">Bitbucket</a></li>
                  
                  <li ><a href="/elmah-io-apps-github/">GitHub</a></li>
                  
                  <li ><a href="/elmah-io-apps-gitlab/">GitLab</a></li>
                  
                  <li ><a href="/elmah-io-apps-hipchat/">HipChat</a></li>
                  
                  <li ><a href="/integrate-elmah-io-with-pipedream/">Pipedream</a></li>
                  
                  <li ><a href="/elmah-io-apps-trello/">Trello</a></li>
                  
                  <li ><a href="/elmah-io-apps-youtrack/">YouTrack</a></li>
                  
                  <li ><a href="/integrate-elmah-io-with-zapier/">Zapier</a></li>
                  
                  <li ><a href="/elmah-io-apps-pagerduty/">PagerDuty</a></li>
                  
                  <li ><a href="/elmah-io-apps-clickup/">ClickUp</a></li>
                  
                  <li ><a href="/elmah-io-apps-chatgpt/">ChatGPT</a></li>
                  
                  <li ><a href="/elmah-io-apps-fixes/">Fixes</a></li>
                  
                  <li ><a href="/elmah-io-apps-botbuster/">BotBuster (deprecated)</a></li>
                  
                  <li ><a href="/elmah-io-apps-ipfilter/">IP Filter (deprecated)</a></li>
                  
                  <li ><a href="/elmah-io-apps-mailman/">Mailman (deprecated)</a></li>
                  
                  <li ><a href="/elmah-io-apps-request-a-new-integration/">Request a new integration</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Uptime Monitoring</a>
                <ul>
                  
                  <li ><a href="/setup-uptime-monitoring/">Set up Uptime Monitoring</a></li>
                  
                  <li ><a href="/missing-server-side-information-on-uptime-errors/">Missing server-side information on uptime errors</a></li>
                  
                  <li ><a href="/allowing-elmah-io-uptime-agents/">Allowing elmah.io uptime agents</a></li>
                  
                  <li ><a href="/uptime-monitoring-troubleshooting/">Uptime Monitoring Troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Heartbeats</a>
                <ul>
                  
                  <li ><a href="/setup-heartbeats/">Set up Heartbeats</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-asp-net-core/">Logging heartbeats from ASP.NET Core</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-azure-functions/">Logging heartbeats from Azure Functions</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-isolated-azure-functions/">Logging heartbeats from Isolated Azure Functions</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-powershell/">Logging heartbeats from PowerShell</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-curl/">Logging heartbeats from cURL</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-umbraco/">Logging heartbeats from Umbraco</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-hangfire/">Logging heartbeats from Hangfire</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-coravel/">Logging heartbeats from Coravel</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-net-core-worker-services/">Logging heartbeats from .NET Core Worker Services</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-aws-lambdas/">Logging heartbeats from AWS Lambdas</a></li>
                  
                  <li ><a href="/logging-heartbeats-from-windows-scheduled-tasks/">Logging heartbeats from Windows Scheduled Tasks</a></li>
                  
                  <li ><a href="/heartbeats-troubleshooting/">Heartbeats Troubleshooting</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Deployment Tracking</a>
                <ul>
                  
                  <li ><a href="/setup-deployment-tracking/">Set up Deployment Tracking</a></li>
                  
                  <li ><a href="/create-deployments-from-powershell/">Create deployments from PowerShell</a></li>
                  
                  <li ><a href="/create-deployments-from-cli/">Create deployments from CLI</a></li>
                  
                  <li ><a href="/create-deployments-from-octopus-deploy/">Create deployments from Octopus Deploy</a></li>
                  
                  <li ><a href="/create-deployments-from-kudu/">Create deployments from Kudu</a></li>
                  
                  <li ><a href="/create-deployments-from-azure-devops-pipelines/">Create deployments from Azure DevOps Pipelines</a></li>
                  
                  <li ><a href="/create-deployments-from-azure-devops-releases/">Create deployments from Azure DevOps Releases</a></li>
                  
                  <li ><a href="/create-deployments-from-github-actions/">Create deployments from GitHub Actions</a></li>
                  
                  <li ><a href="/create-deployments-from-gitlab-pipelines/">Create deployments from GitLab Pipelines</a></li>
                  
                  <li ><a href="/create-deployments-from-umbraco-cloud/">Create deployments from Umbraco Cloud</a></li>
                  
                  <li ><a href="/create-deployments-from-bitbucket-pipelines/">Create deployments from Bitbucket Pipelines</a></li>
                  
                  <li ><a href="/create-deployments-from-atlassian-bamboo/">Create deployments from Atlassian Bamboo</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">CLI</a>
                <ul>
                  
                  <li ><a href="/cli-overview/">CLI overview</a></li>
                  
                  <li ><a href="/cli-clear/">Clear</a></li>
                  
                  <li ><a href="/cli-dataloader/">Dataloader</a></li>
                  
                  <li ><a href="/cli-deployment/">Deployment</a></li>
                  
                  <li ><a href="/cli-diagnose/">Diagnose</a></li>
                  
                  <li ><a href="/cli-export/">Export</a></li>
                  
                  <li ><a href="/cli-import/">Import</a></li>
                  
                  <li ><a href="/cli-log/">Log</a></li>
                  
                  <li ><a href="/cli-sourcemap/">Sourcemap</a></li>
                  
                  <li ><a href="/cli-tail/">Tail</a></li>
                  
                </ul>
              </li>
              
              <li class="li_dropdown">
                <a class="li_parent" href="javascript:;">Everything Else</a>
                <ul>
                  
                  <li ><a href="/managing-organisations-and-users/">Managing Organisations and Users</a></li>
                  
                  <li ><a href="/where-is-my-log-id/">Where is my log ID</a></li>
                  
                  <li ><a href="/where-is-my-api-key/">Where is my API key</a></li>
                  
                  <li ><a href="/where-is-the-permalink-button/">Where is the permalink button</a></li>
                  
                  <li ><a href="/where-is-my-invoice-receipt/">Where is my invoice / receipt</a></li>
                  
                  <li ><a href="/how-to-manage-subscriptions-update-credit-cards-etc/">How to manage subscriptions, update credit cards, etc.</a></li>
                  
                  <li ><a href="/managing-environments/">Managing Environments</a></li>
                  
                  <li ><a href="/recommendations/">Recommendations</a></li>
                  
                  <li ><a href="/how-to-delete-my-account/">How to delete my account</a></li>
                  
                  <li ><a href="/how-to-configure-api-key-permissions/">How to configure API key permissions</a></li>
                  
                  <li ><a href="/how-to-enable-two-factor-login/">How to enable two-factor login</a></li>
                  
                  <li ><a href="/how-to-rename-a-log/">How to rename a log</a></li>
                  
                  <li ><a href="/how-to-include-source-code-in-log-messages/">How to include source code in log messages</a></li>
                  
                  <li ><a href="/how-to-search-custom-data/">How to search custom data</a></li>
                  
                  <li ><a href="/how-to-get-the-sql-tab-to-show-up/">How to get the SQL tab to show up</a></li>
                  
                  <li ><a href="/how-to-configure-and-use-bugster/">How to configure and use Bugster</a></li>
                  
                  <li ><a href="/creating-rules-to-perform-actions-on-messages/">Creating Rules to Perform Actions on Messages</a></li>
                  
                  <li ><a href="/query-messages-using-full-text-search/">Query messages using full-text search</a></li>
                  
                  <li ><a href="/tips-and-tricks-to-stay-below-your-message-limit/">Tips and tricks to stay below your message limit</a></li>
                  
                  <li ><a href="/use-extended-user-details-without-email-as-id/">Use extended user details without email as ID</a></li>
                  
                  <li ><a href="/adding-version-information/">Adding version information</a></li>
                  
                  <li ><a href="/bot-detection/">Bot detection</a></li>
                  
                  <li ><a href="/include-filename-and-line-number-in-stacktraces/">Include filename and line number in stack traces</a></li>
                  
                  <li ><a href="/how-does-the-new-detection-work/">How does the new detection work</a></li>
                  
                  <li ><a href="/how-to-correlate-messages-across-services/">How to correlate messages across services</a></li>
                  
                  <li ><a href="/how-to-get-elmah-io-to-resolve-the-correct-client-ip/">How to get elmah.io to resolve the correct client IP</a></li>
                  
                  <li ><a href="/how-to-avoid-emails-getting-classified-as-spam/">How to avoid emails getting classified as spam</a></li>
                  
                  <li ><a href="/how-prices-are-calculated/">How prices are calculated</a></li>
                  
                  <li ><a href="/how-to-run-elmah-io-in-dark-mode/">How to run elmah.io in dark mode</a></li>
                  
                  <li ><a href="/how-to-show-elmah-io-dashboards-on-a-big-screen/">How to show elmah.io dashboards on a big screen</a></li>
                  
                  <li ><a href="/handle-elmah-io-downtime/">Handle elmah.io downtime</a></li>
                  
                  <li ><a href="/using-the-elmah-io-extension-for-visual-studio/">Using the elmah.io extension for Visual Studio</a></li>
                  
                  <li ><a href="/using-the-rest-api/">Using the REST API</a></li>
                  
                  <li ><a href="/how-to-log-to-elmah-io-from-net-4-5/">How to log to elmah.io from .NET 4.5</a></li>
                  
                  <li ><a href="/upgrade-elmah-io-from-v4-to-v5/">Upgrade elmah.io from v4 to v5</a></li>
                  
                  <li ><a href="/upgrade-elmah-io-from-v3-to-v4/">Upgrade elmah.io from v3 to v4</a></li>
                  
                  <li ><a href="/upgrade-elmah-io-from-v2-to-v3/">Upgrade elmah.io from v2 to v3</a></li>
                  
                  <li ><a href="/email-troubleshooting/">Email troubleshooting</a></li>
                  
                  <li ><a href="/elmah-and-elmah-io-differences/">ELMAH and elmah.io differences</a></li>
                  
                  <li ><a href="/vulnerability-disclosure-program/">Vulnerability Disclosure Program (VDP)</a></li>
                  
                </ul>
              </li>
              
            </ul>
          </div>
        </aside>

        <div class="d-grid w-100 d-block d-md-none">
          <a id="show-sidebar" href="javascript:;" class="btn btn-light border">
            <span class="fal fa-bars me-2"></span><span>Documentation menu</span>
          </a>
        </div>

        <article class="col main-content">
          <div class="main-content-body">

            <p><a href="https://github.com/elmahio/elmah.io.nlog/actions?query=workflow%3Abuild"><img alt="Build status" src="https://github.com/elmahio/elmah.io.nlog/workflows/build/badge.svg" /></a>
<a href="https://www.nuget.org/packages/elmah.io.nlog"><img alt="NuGet" src="https://img.shields.io/nuget/v/elmah.io.nlog.svg" /></a>
<a href="https://github.com/elmahio/elmah.io.nlog/tree/main/samples"><img alt="Samples" src="https://img.shields.io/badge/samples-4-brightgreen.svg" /></a></p>
<h1 id="logging-to-elmahio-from-nlog">Logging to elmah.io from NLog</h1>
<div class="toc">
<ul>
<li><a href="#logging-to-elmahio-from-nlog">Logging to elmah.io from NLog</a><ul>
<li><a href="#configuration-in-net">Configuration in .NET</a><ul>
<li><a href="#specify-api-key-and-log-id-in-appsettings">Specify API key and log ID in appSettings</a></li>
<li><a href="#intellisense">IntelliSense</a></li>
</ul>
</li>
<li><a href="#configuration-in-appsettingsjson">Configuration in appsettings.json</a><ul>
<li><a href="#elmahio-configuration-outside-the-nlog-section">elmah.io configuration outside the NLog section</a></li>
<li><a href="#intellisense_1">IntelliSense</a></li>
</ul>
</li>
<li><a href="#configuration-in-code">Configuration in code</a></li>
<li><a href="#logging-custom-properties">Logging custom properties</a><ul>
<li><a href="#setting-application-name">Setting application name</a></li>
<li><a href="#setting-version-number">Setting version number</a></li>
<li><a href="#setting-category">Setting category</a></li>
</ul>
</li>
<li><a href="#message-hooks">Message hooks</a><ul>
<li><a href="#decorating-log-messages">Decorating log messages</a><ul>
<li><a href="#include-source-code">Include source code</a></li>
</ul>
</li>
<li><a href="#handle-errors">Handle errors</a></li>
<li><a href="#error-filtering">Error filtering</a></li>
</ul>
</li>
<li><a href="#include-http-context-in-aspnet-and-aspnet-core">Include HTTP context in ASP.NET and ASP.NET Core</a></li>
<li><a href="#nlog-troubleshooting">NLog Troubleshooting</a><ul>
<li><a href="#systemiofileloadexception-could-not-load-file-or-assembly-newtonsoftjson">System.IO.FileLoadException: Could not load file or assembly 'Newtonsoft.Json'</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>NLog is one of the most popular logging frameworks for .NET. With an active history of almost 10 years, the possibilities with NLog are many and itâ€™s easy to find documentation on how to use it.</p>
<p>To start logging messages from NLog to elmah.io, you need to install the <code>Elmah.Io.NLog</code> NuGet package:</p>
<div class=md-fenced-code-tabs id=tab-tab-group-0><ul class="nav nav-tabs"><li class=nav-item><a class="nav-link active" id=tab-group-0-0_cmd-tab data-bs-toggle=tab data-bs-target=#tab-group-0-0_cmd-panel type=button role=tab data-lang=cmd aria-controls=tab-group-0-0_cmd-panel aria-selected=true>.NET CLI</a></li><li class=nav-item><a class="nav-link " id=tab-group-0-1_powershell-tab data-bs-toggle=tab data-bs-target=#tab-group-0-1_powershell-panel type=button role=tab data-lang=powershell aria-controls=tab-group-0-1_powershell-panel aria-selected=false>Package Manager</a></li><li class=nav-item><a class="nav-link " id=tab-group-0-2_xml-tab data-bs-toggle=tab data-bs-target=#tab-group-0-2_xml-panel type=button role=tab data-lang=xml aria-controls=tab-group-0-2_xml-panel aria-selected=false>PackageReference</a></li><li class=nav-item><a class="nav-link " id=tab-group-0-3_xml-tab data-bs-toggle=tab data-bs-target=#tab-group-0-3_xml-panel type=button role=tab data-lang=xml aria-controls=tab-group-0-3_xml-panel aria-selected=false>Paket CLI</a></li></ul><div class=tab-content><div id=tab-group-0-0_cmd-panel class="tab-pane show active" role=tabpanel aria-labelledby=tab-group-0-0_cmd-tab><pre><code class=cmd>dotnet add package Elmah.Io.NLog
</code></pre></div><div id=tab-group-0-1_powershell-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-0-1_powershell-tab><pre><code class=powershell>Install-Package Elmah.Io.NLog
</code></pre></div><div id=tab-group-0-2_xml-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-0-2_xml-tab><pre><code class=xml>&lt;PackageReference Include=&quot;Elmah.Io.NLog&quot; Version=&quot;5.*&quot; /&gt;
</code></pre></div><div id=tab-group-0-3_xml-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-0-3_xml-tab><pre><code class=xml>paket add Elmah.Io.NLog
</code></pre></div></div></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please don't use NLog <code>4.6.0</code> since that version contains a bug that causes the elmah.io target to not load correctly. <code>4.5.11</code>, <code>4.6.1</code>, or newer.</p>
</div>
<h2 id="configuration-in-net">Configuration in .NET</h2>
<p>To configure the elmah.io target, add the following configuration to your app.config/web.config/nlog.config depending on what kind of project youâ€™ve created:</p>
<div class="tabbable-responsive">
<div class="tabbable">
<ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="nav-item"><a class="nav-link active" href="#setup4" aria-controls="home" role="tab" data-bs-toggle="tab" data-bs-tab="nlog34">Elmah.Io.NLog 3.x/4.x</a></li>
    <li role="presentation" class="nav-item"><a class="nav-link" href="#setup5" aria-controls="profile" role="tab" data-bs-toggle="tab" data-bs-tab="nlog5">Elmah.Io.NLog >= 5</a></li>
</ul>
</div>
</div>

<div class="tab-content tab-content-tabbable">
<div class="tab-pane active" id="setup4" role="tabpanel">
<p> <pre><code class=xml>&lt;extensions&gt;
  &lt;add assembly=&quot;Elmah.Io.NLog&quot;/&gt;
&lt;/extensions&gt;

&lt;targets&gt;
  &lt;target name=&quot;elmahio&quot; type=&quot;elmah.io&quot; apiKey=&quot;API_KEY&quot; logId=&quot;LOG_ID&quot;/&gt;
&lt;/targets&gt;

&lt;rules&gt;
  &lt;logger name=&quot;*&quot; minlevel=&quot;Info&quot; writeTo=&quot;elmahio&quot; /&gt;
&lt;/rules&gt;
</code></pre></p>
</div>
<div class="tab-pane" id="setup5" role="tabpanel">
<p> <pre><code class=xml>&lt;targets&gt;
  &lt;target name=&quot;elmahio&quot; type=&quot;elmah.io, Elmah.Io.NLog&quot; apiKey=&quot;API_KEY&quot; logId=&quot;LOG_ID&quot;/&gt;
&lt;/targets&gt;

&lt;rules&gt;
  &lt;logger name=&quot;*&quot; minlevel=&quot;Info&quot; writeTo=&quot;elmahio&quot; /&gt;
&lt;/rules&gt;
</code></pre></p>
</div>
</div>
<p>Replace <code>API_KEY</code> with your API key (<a href="../where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> with the ID of the log you want messages sent to (<a href="../where-is-my-log-id/">Where is my log ID?</a>).</p>
<p>In the example, we specify the level minimum as Info. This tells NLog to log only information, warning, error, and fatal messages. You may adjust this, but be aware that your elmah.io log may run full pretty fast, especially if you log thousands and thousands of trace and debug messages.</p>
<p>Log messages to elmah.io, just as with every other target and NLog:</p>
<p> <pre><code class=csharp>log.Warn(&quot;This is a warning message&quot;);
log.Error(new Exception(), &quot;This is an error message&quot;);
</code></pre></p>
<h3 id="specify-api-key-and-log-id-in-appsettings">Specify API key and log ID in appSettings</h3>
<p>If you are already using elmah.io, you may have your API key and log ID in the <code>appSettings</code> element already. To use these settings from withing the NLog target configuration you can use an NLog layout formatter:</p>
<p> <pre><code class=xml>&lt;targets&gt;
  &lt;target name=&quot;elmahio&quot; type=&quot;elmah.io&quot; apiKey=&quot;${appsetting:item=apiKey}&quot; logId=&quot;${appsetting:item=logId}&quot;/&gt;
&lt;/targets&gt;
</code></pre></p>
<p>By using the layout <code>${appsetting:item=apiKey}</code> you tell NLog that the value for this attribute is in an <code>appSettings</code> element named <code>elmahKey</code>:</p>
<p> <pre><code class=xml>&lt;appSettings&gt;
  &lt;add key=&quot;apiKey&quot; value=&quot;API_KEY&quot; /&gt;
  &lt;add key=&quot;logId&quot; value=&quot;LOG_ID&quot; /&gt;
&lt;/appSettings&gt;
</code></pre></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>appSettings</code> layout formatter only works when targeting .NET Full Framework and requires <code>Elmah.Io.NLog</code> version 3.3.x or above and <code>NLog</code> version 4.6.x or above.</p>
</div>
<h3 id="intellisense">IntelliSense</h3>
<p>There is support for adding IntelliSense in Visual Studio for the <code>NLog.config</code> file. Extend the <code>nlog</code> root element like this:</p>
<p> <pre><code class=xml>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;nlog xmlns=&quot;http://www.nlog-project.org/schemas/NLog.xsd&quot;
      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
      xmlns:elmahio=&quot;http://www.nlog-project.org/schemas/NLog.Targets.Elmah.Io.xsd&quot;
      xsi:schemaLocation=&quot;http://www.nlog-project.org/schemas/NLog.Targets.Elmah.Io.xsd http://www.nlog-project.org/schemas/NLog.Targets.Elmah.Io.xsd&quot;&gt;
  &lt;!-- ... --&gt;
&lt;/nlog&gt;
</code></pre></p>
<p>Then change the <code>type</code> attribute in the target to <code>xsi:type</code>:</p>
<p> <pre><code class=xml>&lt;target xsi:type=&quot;elmahio:elmah.io&quot; /&gt;
</code></pre></p>
<h2 id="configuration-in-appsettingsjson">Configuration in appsettings.json</h2>
<p>.NET 5 (previously Core) and newer switched from declaring XML configuration in <code>app/web/nlog.config</code> files to JSON configuration in an <code>appsettings.json</code> file. To configure elmah.io in JSON, install the <code>NLog.Extensions.Logging</code> NuGet package:</p>
<div class=md-fenced-code-tabs id=tab-tab-group-8><ul class="nav nav-tabs"><li class=nav-item><a class="nav-link active" id=tab-group-8-0_cmd-tab data-bs-toggle=tab data-bs-target=#tab-group-8-0_cmd-panel type=button role=tab data-lang=cmd aria-controls=tab-group-8-0_cmd-panel aria-selected=true>.NET CLI</a></li><li class=nav-item><a class="nav-link " id=tab-group-8-1_powershell-tab data-bs-toggle=tab data-bs-target=#tab-group-8-1_powershell-panel type=button role=tab data-lang=powershell aria-controls=tab-group-8-1_powershell-panel aria-selected=false>Package Manager</a></li><li class=nav-item><a class="nav-link " id=tab-group-8-2_xml-tab data-bs-toggle=tab data-bs-target=#tab-group-8-2_xml-panel type=button role=tab data-lang=xml aria-controls=tab-group-8-2_xml-panel aria-selected=false>PackageReference</a></li><li class=nav-item><a class="nav-link " id=tab-group-8-3_xml-tab data-bs-toggle=tab data-bs-target=#tab-group-8-3_xml-panel type=button role=tab data-lang=xml aria-controls=tab-group-8-3_xml-panel aria-selected=false>Paket CLI</a></li></ul><div class=tab-content><div id=tab-group-8-0_cmd-panel class="tab-pane show active" role=tabpanel aria-labelledby=tab-group-8-0_cmd-tab><pre><code class=cmd>dotnet add package NLog.Extensions.Logging
</code></pre></div><div id=tab-group-8-1_powershell-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-8-1_powershell-tab><pre><code class=powershell>Install-Package NLog.Extensions.Logging
</code></pre></div><div id=tab-group-8-2_xml-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-8-2_xml-tab><pre><code class=xml>&lt;PackageReference Include=&quot;NLog.Extensions.Logging&quot; Version=&quot;1.*&quot; /&gt;
</code></pre></div><div id=tab-group-8-3_xml-panel class="tab-pane " role=tabpanel aria-labelledby=tab-group-8-3_xml-tab><pre><code class=xml>paket add NLog.Extensions.Logging
</code></pre></div></div></div>
<p>Extend the <code>appsettings.json</code> file with a new <code>NLog</code> section:</p>
<div class="tabbable-responsive">
<div class="tabbable">
<ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="nav-item"><a class="nav-link active" href="#setupcore4" aria-controls="home" role="tab" data-bs-toggle="tab" data-bs-tab="nlog34">Elmah.Io.NLog 3.x/4.x</a></li>
    <li role="presentation" class="nav-item"><a class="nav-link" href="#setupcore5" aria-controls="profile" role="tab" data-bs-toggle="tab" data-bs-tab="nlog5">Elmah.Io.NLog >= 5</a></li>
</ul>
</div>
</div>

<div class="tab-content tab-content-tabbable">
<div class="tab-pane active" id="setupcore4" role="tabpanel">
<p> <pre><code class=json>{
  &quot;NLog&quot;: {
    &quot;throwConfigExceptions&quot;: true,
    &quot;extensions&quot;: [
      { &quot;assembly&quot;: &quot;Elmah.Io.NLog&quot; }
    ],
    &quot;targets&quot;: {
      &quot;elmahio&quot;: {
        &quot;type&quot;: &quot;elmah.io&quot;,
        &quot;apiKey&quot;: &quot;API_KEY&quot;,
        &quot;logId&quot;: &quot;LOG_ID&quot;
      }
    },
    &quot;rules&quot;: [
      {
        &quot;logger&quot;: &quot;*&quot;,
        &quot;minLevel&quot;: &quot;Info&quot;,
        &quot;writeTo&quot;: &quot;elmahio&quot;
      }
    ]
  }
}
</code></pre></p>
</div>
<div class="tab-pane" id="setupcore5" role="tabpanel">
<p> <pre><code class=json>{
  &quot;NLog&quot;: {
    &quot;throwConfigExceptions&quot;: true,
    &quot;targets&quot;: {
      &quot;elmahio&quot;: {
        &quot;type&quot;: &quot;elmah.io, Elmah.Io.NLog&quot;,
        &quot;apiKey&quot;: &quot;API_KEY&quot;,
        &quot;logId&quot;: &quot;LOG_ID&quot;
      }
    },
    &quot;rules&quot;: [
      {
        &quot;logger&quot;: &quot;*&quot;,
        &quot;minLevel&quot;: &quot;Info&quot;,
        &quot;writeTo&quot;: &quot;elmahio&quot;
      }
    ]
  }
}
</code></pre></p>
</div>
</div>
<p>Replace <code>API_KEY</code> with your API key (<a href="../where-is-my-api-key/">Where is my API key?</a>) and <code>LOG_ID</code> with the ID of the log you want messages sent to (<a href="../where-is-my-log-id/">Where is my log ID?</a>).</p>
<p>If you haven't already loaded the configuration in your application, make sure to do so:</p>
<p> <pre><code class=csharp>var config = new ConfigurationBuilder()
    .AddJsonFile(&quot;appsettings.json&quot;, optional: true, reloadOnChange: true)
    .Build();
</code></pre></p>
<p>Finally, tell NLog how to load the <code>NLog</code> configuration section:</p>
<p> <pre><code class=csharp>LogManager.Configuration = new NLogLoggingConfiguration(config.GetSection(&quot;NLog&quot;));
</code></pre></p>
<h3 id="elmahio-configuration-outside-the-nlog-section">elmah.io configuration outside the NLog section</h3>
<p>You might not want the elmah.io API key and log Id inside the <code>NLog</code> section or already have an <code>ElmahIo</code> section defined and want to reuse that. Splitting up configuration like that is supported through NLog layout renderers:</p>
<p> <pre><code class=json>{
  &quot;NLog&quot;: {
    // ...
    &quot;targets&quot;: {
      &quot;elmahio&quot;: {
        &quot;type&quot;: &quot;elmah.io&quot;,
        &quot;apiKey&quot;: &quot;${configsetting:item=ElmahIo.ApiKey}&quot;,
        &quot;logId&quot;: &quot;${configsetting:item=ElmahIo.LogId}&quot;
      }
    },
    // ...
  },
  &quot;ElmahIo&quot;: {
    &quot;ApiKey&quot;: &quot;API_KEY&quot;,
    &quot;LogId&quot;: &quot;LOG_ID&quot;
  }
}
</code></pre></p>
<p>Notice how the value of the <code>apiKey</code> and <code>logId</code> parameters have been replaced with <code>${configsetting:item=ElmahIo.*}</code>. At the bottom, the <code>ElmahIo</code> section wraps the API key and log Id.</p>
<p>To make this work, you will need an additional line of C# when setting up NLog logging:</p>
<p> <pre><code class=csharp>var config = new ConfigurationBuilder()
    .AddJsonFile(&quot;appsettings.json&quot;, optional: true, reloadOnChange: true)
    .Build();

ConfigSettingLayoutRenderer.DefaultConfiguration = config; // ðŸ‘ˆ add this line

LogManager.Configuration = new NLogLoggingConfiguration(config.GetSection(&quot;NLog&quot;));
</code></pre></p>
<h3 id="intellisense_1">IntelliSense</h3>
<p>There is support for adding IntelliSense in Visual Studio for the <code>NLog</code> section in the <code>appsettings.json</code> file. Copy and paste the following link into the <em>Schema</em> textbox above the file content:</p>
<p> <pre><code class=cmd>https://nlog-project.org/schemas/appsettings.schema.json
</code></pre></p>
<h2 id="configuration-in-code">Configuration in code</h2>
<p>The elmah.io target can be configured from C# code if you prefer or need to access the built-in events (see more later). The following adds logging to elmah.io:</p>
<p> <pre><code class=csharp>var config = new LoggingConfiguration();
var elmahIoTarget = new ElmahIoTarget();
elmahIoTarget.Name = &quot;elmahio&quot;;
elmahIoTarget.ApiKey = &quot;API_KEY&quot;;
elmahIoTarget.LogId = &quot;LOG_ID&quot;;
config.AddTarget(elmahIoTarget);
config.AddRuleForAllLevels(elmahIoTarget);
LogManager.Configuration = config;
</code></pre></p>
<p>The example will log all log levels to elmah.io. For more information about how to configure individual log levels, check out the <a href="https://github.com/NLog/NLog/wiki/Configure-from-code">NLog documentation on GitHub</a>.</p>
<h2 id="logging-custom-properties">Logging custom properties</h2>
<p>NLog supports logging custom properties in multiple ways. If you want to include a property (like a version number) in all log messages, you might want to look into the <a href="#decorating-log-messages"><code>OnMessage</code></a> feature on <code>Elmah.Io.NLog</code>.</p>
<p>With custom properties, you can log additional key/value pairs with every log message. The elmah.io target for NLog supports <a href="../logging-custom-data/">custom properties</a> as well. Properties are persisted alongside every log message in elmah.io and searchable if <a href="../logging-custom-data/#looking-at-your-custom-data">named correctly</a>.</p>
<p>One way to log custom properties with NLog and elmah.io is to use the overload of each logging-method that takes a <code>LogEventInfo</code> object as a parameter:</p>
<p> <pre><code class=csharp>var infoMessage = new LogEventInfo(LogLevel.Info, &quot;&quot;, &quot;This is an information message&quot;);
infoMessage.Properties.Add(&quot;Some Property Key&quot;, &quot;Some Property Value&quot;);
log.Info(infoMessage);
</code></pre></p>
<p>This saves the information message in elmah.io with a custom property with key <code>Some Property Key</code> and value <code>Some Property Value</code>.</p>
<p>As of NLog 4.5, structured logging is supported as well. To log a property as part of the log message, use the new syntax as shown here:</p>
<p> <pre><code class=csharp>log.Warn(&quot;Property named {FirstName}&quot;, &quot;Donald&quot;);
</code></pre></p>
<p>In the example, NLog will log the message <code>Property named "Donald"</code>, but the key (<code>FirstName</code>) and value (<code>Donald</code>), will also be available in the <em>Data</em> tab inside elmah.io.</p>
<p><code>Elmah.Io.NLog</code> provides a range of reserved property names, that can be used to fill in data in the correct fields on the elmah.io UI. Let's say you want to fill the <code>User</code> field using structured logging only:</p>
<p> <pre><code class=csharp>log.Info(&quot;{Quote} from {User}&quot;, &quot;Hasta la vista, baby&quot;, &quot;T-800&quot;);
</code></pre></p>
<p>This will fill in the value <code>T-800</code> in the <code>User</code> field, as well as add two key/value pairs (<code>Quote</code> and <code>User</code>) to the <em>Data</em> tab on elmah.io. For a reference of all possible property names, check out the property names on <a href="https://github.com/elmahio/Elmah.Io.Client/blob/main/src/Elmah.Io.Client/ElmahioClient.cs#L3617">CreateMessage</a>.</p>
<p>NLog also provides a fluent API (available in the <code>NLog.Fluent</code> namespace) that some might find more readable:</p>
<p> <pre><code class=csharp>logger.Info()
      .Message(&quot;I'll be back&quot;)
      .Property(&quot;User&quot;, &quot;T-800&quot;)
      .Write();
</code></pre></p>
<p>If you want to use the normal logging methods like <code>Info</code> and <code>Error</code>, you can do so injunction with the <code>MappedDiagnosticsLogicalContext</code> class, also provided by NLog:</p>
<p> <pre><code class=csharp>using (MappedDiagnosticsLogicalContext.SetScoped(&quot;User&quot;, &quot;T-800&quot;))
{
   logger.Info(&quot;I'll be back&quot;);
}
</code></pre></p>
<p>This will create the same result as the example above.</p>
<p>In NLog 5 <code>MappedDiagnosticsLogicalContext</code> has been deprecated in favor of a scope context:</p>
<p> <pre><code class=csharp>using (logger.PushScopeProperty(&quot;User&quot;, &quot;T-800&quot;))
{
   logger.Info(&quot;I'll be back&quot;);
}
</code></pre></p>
<h3 id="setting-application-name">Setting application name</h3>
<p>The application field on elmah.io can be set globally using NLog's global context:</p>
<p> <pre><code class=csharp>GlobalDiagnosticsContext.Set(&quot;Application&quot;, &quot;My application name&quot;);
</code></pre></p>
<h3 id="setting-version-number">Setting version number</h3>
<p>The version field on elmah.io can be set globally using NLog's global context:</p>
<p> <pre><code class=csharp>GlobalDiagnosticsContext.Set(&quot;Version&quot;, &quot;1.2.3&quot;);
</code></pre></p>
<h3 id="setting-category">Setting category</h3>
<p>elmah.io provide a field named <em>Category</em> to better group log messages by class name, namespace, or similar. Category maps to NLog's <em>logger</em> field automatically when using <code>Elmah.Io.NLog</code>. The category field can be overwritten using a scoped property (NLog 5):</p>
<p> <pre><code class=csharp>using (logger.PushScopeProperty(&quot;category&quot;, &quot;The category&quot;))
{
    logger.Info(&quot;This is an information message with category&quot;);
}
</code></pre></p>
<h2 id="message-hooks">Message hooks</h2>
<p><code>Elmah.Io.NLog</code> provides message hooks similar to the integrations with ASP.NET and ASP.NET Core. Message hooks need to be implemented in C#. Either <a href="#configuration-in-code">configure the elmah.io target in C#</a> or fetch the target already configured in XML:</p>
<p> <pre><code class=csharp>var elmahIoTarget = (ElmahIoTarget)LogManager.Configuration.FindTargetByName(&quot;elmahio&quot;);
</code></pre></p>
<p>You also need to install the most recent version of the <code>Elmah.Io.Client</code> NuGet package to use message hooks.</p>
<h3 id="decorating-log-messages">Decorating log messages</h3>
<p>To include additional information on log messages, you can use the <code>OnMessage</code> action:</p>
<p> <pre><code class=csharp>elmahIoTarget.OnMessage = msg =&gt;
{
    msg.Version = &quot;1.0.0&quot;;
};
</code></pre></p>
<p>The example above includes a version number on all errors.</p>
<h4 id="include-source-code">Include source code</h4>
<p>You can use the <code>OnMessage</code> action to include source code to log messages. This will require a stack trace in the <code>Detail</code> property with filenames and line numbers in it.</p>
<p>There are multiple ways of including source code to log messages. In short, you will need to install the <code>Elmah.Io.Client.Extensions.SourceCode</code> NuGet package and call the <code>WithSourceCodeFromPdb</code> method in the <code>OnMessage</code> action:</p>
<p> <pre><code class=csharp>elmahIoTarget.OnMessage = msg =&gt;
{
    msg.WithSourceCodeFromPdb();
};
</code></pre></p>
<p>Check out <a href="../how-to-include-source-code-in-log-messages/">How to include source code in log messages</a> for additional requirements to make source code show up on elmah.io.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Including source code on log messages is available in the <code>Elmah.Io.Client</code> v4 package and forward.</p>
</div>
<h3 id="handle-errors">Handle errors</h3>
<p>To handle any errors happening while processing a log message, you can use the OnError event when initializing the elmah.io target:</p>
<p> <pre><code class=csharp>elmahIoTarget.OnError = (msg, err) =&gt;
{
    // Do something here
};
</code></pre></p>
<p>The example implements a callback if logging to elmah.io fails. How you choose to implement this is entirely up to your application and tech stack.</p>
<h3 id="error-filtering">Error filtering</h3>
<p>To ignore specific errors based on their content, you can use the OnFilter event when initializing the elmah.io target:</p>
<p> <pre><code class=csharp>elmahIoTarget.OnFilter = msg =&gt;
{
    return msg.Title.Contains(&quot;trace&quot;);
};
</code></pre></p>
<p>The example above ignores any log messages with the word <code>trace</code> in the title.</p>
<h2 id="include-http-context-in-aspnet-and-aspnet-core">Include HTTP context in ASP.NET and ASP.NET Core</h2>
<p>When logging through NLog from a web application, you may want to include HTTP contextual information like the current URL, status codes, server variables, etc. NLog provides two web-packages to include this information. For ASP.NET, MVC, and Web API you can install the <code>NLog.Web</code> NuGet package and include the following code in <code>web.config</code>:</p>
<p> <pre><code class=xml>&lt;system.webServer&gt;
  &lt;modules runAllManagedModulesForAllRequests=&quot;true&quot;&gt;
    &lt;add name=&quot;NLog&quot; type=&quot;NLog.Web.NLogHttpModule, NLog.Web&quot; /&gt;
  &lt;/modules&gt;
&lt;/system.webServer&gt;
</code></pre></p>
<p>For ASP.NET Core you can install the <code>NLog.Web.AspNetCore</code> NuGet package. When installed, the elmah.io NLog target automatically picks up the HTTP context and fills in all possible fields on messages sent to elmah.io.</p>
<h2 id="nlog-troubleshooting">NLog Troubleshooting</h2>
<p>Here are some things to try out if logging from NLog to elmah.io doesn't work:</p>
<ul>
<li>Run the <code>diagnose</code> command with the <a href="../cli-overview/">elmah.io CLI</a> as shown here: <a href="../cli-diagnose/">Diagnose potential problems with an elmah.io installation</a>.</li>
<li>Make sure that you have the newest <code>Elmah.Io.NLog</code> and <code>Elmah.Io.Client</code> packages installed.</li>
<li>Make sure to include all of the configuration from the example above. That includes both the <code>&lt;extensions&gt;</code> (Only needed in <code>Elmah.Io.NLog</code> 3 and 4), <code>&lt;targets&gt;</code>, and <code>&lt;rules&gt;</code> element.</li>
<li>Make sure that the API key is valid and allow the <em>Messages</em> | <em>Write</em> <a href="../how-to-configure-api-key-permissions/">permission</a>.</li>
<li>Make sure to include a valid log ID.</li>
<li>Make sure that you have sufficient log messages in your subscription and that you didn't disable logging to the log or include any ignore filters/rules.</li>
<li>Always make sure to call <code>LogManager.Shutdown()</code> before exiting the application to make sure that all log messages are flushed. If you are re-using the logger but only want to shut down the thread that is logging messages or similar you can call <code>LogManager.Flush()</code> which will store all batched messages.</li>
<li>Extend the <code>nlog</code> element with <code>internalLogLevel="Warn" internalLogFile="c:\temp\nlog-internal.log</code> and inspect that log file for any internal NLog errors.</li>
</ul>
<h3 id="systemiofileloadexception-could-not-load-file-or-assembly-newtonsoftjson">System.IO.FileLoadException: Could not load file or assembly 'Newtonsoft.Json'</h3>
<p>If you see this error in the internal NLog file it means that there's a problem with multiple assemblies referencing different versions of <code>Newtonsoft.Json</code> (also known as <em>NuGet dependency hell</em>). This can be fixed by redirecting to the installed version in the <code>App.config</code> or <code>Web.config</code> file:</p>
<p> <pre><code class=xml>&lt;runtime&gt;
  &lt;assemblyBinding xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot;&gt;
    &lt;dependentAssembly&gt;
      &lt;assemblyIdentity name=&quot;Newtonsoft.Json&quot; publicKeyToken=&quot;30ad4fe6b2a6aeed&quot; culture=&quot;neutral&quot; /&gt;
      &lt;bindingRedirect oldVersion=&quot;0.0.0.0-13.0.1.0&quot; newVersion=&quot;13.0.1.0&quot;/&gt;
    &lt;/dependentAssembly&gt;
  &lt;/assemblyBinding&gt;
&lt;/runtime&gt;
</code></pre></p>

            <br/>
            <p><small><em>This article was brought to you by the elmah.io team. elmah.io is the best error management system for .NET web applications. We monitor your website, alert you when errors start happening, and help you fix errors fast.</em></small></p>
            <p class="text-center">
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-none d-sm-block white-space-normal">See how we can help you monitor your website for crashes</a>
                <a href="https://app.elmah.io/signup/" class="btn btn-lg btn-primary d-block d-sm-none">Monitor your website</a>
            </p>
          </div>
        </article>
      </div>
    </div>

    <footer>
    	<div id="back-to-top" class="d-block d-sm-none"><span class="far fa-arrow-up"></span></div>
    	<div class="pre-footer">
	    	<div class="container">
          <div class="company-logo">
					  <img class="img-fluid" src="../assets/img/elmahio.png" width="222" height="138" alt="elmah.io">
            <div class="bug-head"></div>
				  </div>
				  <a href="https://app.elmah.io/signup/" class="btn btn-primary float-end"><span>Sign Up Now</span><span class="info">no credit card required</span></a>
			  </div>
	    </div>
    	<div class="links">
    		<div class="container">
    			<div class="row">
    				<div class="col">
    					<span>Product</span>
    					<ul class="list-unstyled">
							  <li><a href="https://elmah.io/features/">Features</a></li>
							  <li><a href="https://elmah.io/pricing/">Pricing</a></li>
                <li><a href="https://elmah.io/tour/">Tour</a></li>
							  <li><a href="https://elmah.io/features/appstore/">App Store</a></li>
						  </ul>
            </div>
    				<div class="col">
    					<span>Company</span>
              <ul class="list-unstyled">
                <li><a href="https://elmah.io/about/">About</a></li>
                <li><a href="https://elmah.io/contact/">Contact</a></li>
                <li><a href="https://blog.elmah.io/">Blog</a></li>
                <li><a href="https://docs.elmah.io/">Docs</a></li>
              </ul>
    				</div>
    				<div class="col">
    					<span>Learn</span>
              <ul class="list-unstyled">
                <li><a href="https://elmah.io/customer-stories/">Customer Stories</a></li>
                <li><a href="https://elmah.io/for-ctos/">For CEOs and CTOs</a></li>
                <li><a href="https://elmah.io/alternatives/">Alternatives</a></li>
                <li><a href="https://elmah.io/api/v3/">API</a></li>
              </ul>
    				</div>
    				<div class="col">
    					<span>Guides</span>
              <ul class="list-unstyled">
                <li><a href="https://elmah.io/devops/">.NET DevOps</a></li>
                <li><a href="https://elmah.io/microservices/">.NET Microservices</a></li>
                <li><a href="https://elmah.io/cloud-logging/">.NET Cloud Logging</a></li>
                <li><a href="https://elmah.io/features/asp-net-core/">ASP.NET Core Error Logging</a></li>
              </ul>
    				</div>
    				<div class="col">
              <span>Online Tools</span>
              <ul class="list-unstyled">
                <li><a href="https://elmah.io/tools/config-validator/">Web.config Validator</a></li>
                <li><a href="https://elmah.io/tools/stack-trace-formatter/">Stack Trace Formatter</a></li>
                <li><a href="https://elmah.io/tools/webconfig-transformation-tester/">Web.config Transform Tester</a></li>
                <li><a href="https://elmah.io/tools/">More Free Tools</a></li>
              </ul>
            </div>
    			</div>
    		</div>
    	</div>
    	<div class="copyright">
    		<div class="container">
    			<div class="row no-gutters">
            <div class="col-lg-5 col-md-12 order-2 order-lg-1">
              <div class="text-center text-lg-start">
                <p>2013 - <span id="currentYear"></span> @ elmah.io. All Rights Reserved.</p>
                <p><a href="https://elmah.io/legal/terms-of-use/">Terms of Use</a> | <a href="https://elmah.io/legal/privacy-policy/">Privacy Policy</a> | <a href="https://elmah.io/legal/refund-policy/">Refund Policy</a></p>
              </div>
            </div>
            <div class="col-lg-2 col-md-12 order-3 order-lg-1">
              <ul class="list-unstyled social mb-0">
                <li class="list-inline-item"><a href="https://x.com/elmah_io" aria-label="Follow us on X"><i class="fab x-twitter"></i></a></li>
                <li class="list-inline-item"><a href="https://facebook.com/elmahdotio" aria-label="Follow us on Facebook"><i class="fab fa-facebook-f"></i></a></li>
                <li class="list-inline-item"><a href="https://www.linkedin.com/company/elmah-io/" aria-label="Follow us on LinkedIn"><i class="fab fa-linkedin-in"></i></a></li>
              </ul>
            </div>
            <div class="col-lg-5 col-md-12 order-1 order-lg-2">
              <div class="footer-badges text-center text-lg-end">
                <a href="https://elmah.io/security/"><img src="../assets/img/pcicompliant.png" width="67" height="40" draggable="false" alt="PCI Compliant" /></a>
                <a href="https://elmah.io/security/"><img src="../assets/img/gdpr.png" width="106" height="40" draggable="false" alt="GDPR Compliant" /></a>
                <a href="https://elmah.io/security/"><img src="../assets/img/shieldssl.png" width="102" height="40" draggable="false" alt="Alpha SSL" /></a>
              </div>
            </div>
          </div>
    		</div>
    	</div>
    </footer>

    <div class="bugster-banner-floating">
      <a role="button" data-bs-toggle="modal" data-bs-target="#bugsterModal">
        <div class="content">
          <p class="mb-1 lead">Have a question ?</p>
          <p class="mb-0">Ask anything and Bugster will be ready to answer and help you.</p>
        </div>
        <div class="bugster-logo">
          <img class="img-fluid" src="../assets/img/bugster.png" width="383" height="374" alt="Bugster">
        </div>
      </a>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="bugsterModal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="bugsterModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="bugster-hero">
              <div class="bugster-logo text-center">
                <img class="img-fluid" src="../assets/img/bugster.png" width="383" height="374" alt="Bugster">
              </div>
              <div class="content text-center">
                <p class="lead mb-2">Introducing Bugster <span class="badge text-bg-danger ms-1">BETA</span></p>
                <p>Your AI assistant for quick navigation through documentation, providing valuable answers and insights in no time!</p>
                <div class="row">
                  <div class="col-md-6">
                    <a role="button" class="list-group-item-action mb-2" data-question="Why is my ASP.NET Core application not logging errors to elmah.io?">
                      <span>Exceptions are not logged from ASP.NET Core</span>
                    </a>
                  </div>
                  <div class="col-md-6">
                    <a role="button" class="list-group-item-action mb-2" data-question="How do I log errors to elmah.io from Serilog?">
                      <span>How to log from Serilog?</span>
                    </a>
                  </div>
                  <div class="col-md-6">
                    <a role="button" class="list-group-item-action mb-2" data-question="How do I include source code in log messages?">
                      <span>How do I include source code?</span>
                    </a>
                  </div>
                  <div class="col-md-6">
                    <a role="button" class="list-group-item-action mb-2" data-question="What is the difference between ELMAH and elmah.io?">
                      <span>How are ELMAH and elmah.io different?</span>
                    </a>
                  </div>
                </div>
                <div class="row">
                  <div class="col">
                    <div class="alert alert-warning mt-2" role="alert">
                      Bugster is experimental and still learning why answers may be wrong.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="bugster-chat d-none"></div>
          </div>
          <div class="modal-footer collapse show">
            <form id="bugster-form" class="form w-100">
              <div class="input-group">
                <input type="text" id="question" class="form-control" placeholder="Ask Bugster" aria-label="Recipient's username" aria-describedby="send-message" required autocomplete="off">
                <button class="btn btn-primary" type="submit" id="send-message"><i class="fas fa-paper-plane px-3"></i></button>
              </div>
              <div class="form-text d-none">
                <a role="button" class="intercom-link" data-event="showNewMessage" data-message="I need help from a human.">Transfer this conversation to a support request</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="../vendor/elmahio/elmahio.min.js"></script>
    <script src="../assets/js/initElmahio.js"></script>
    
    <script src="../assets/js/main.min.js?version=619"></script>
    
  </body>
</html>